# Title

Relocation troncated to fit error

# Context

An error occured when trying to compile the printk routine: 

```Shell
build/kernel.o : in the function "Kernel_Init":
(.text+0x4): relocation troncated to fit : R_RISCV_HI20 with ".LC0"
```

This error comes from the **addressing mode** used by the riscv compiler. Here the compiler tries to load the address in **absolute** adressing mode: it's built from a 32 bits value which can hold an address up to 2GB. If it's higher than this range, the value is troncated and will generate a fault.

To solve this issue, the **relative** addressing mode has to be used by the compiler. Here the address will be generated by using the **global pointer** register on which a 32 bits value is added. This makes it possible to generate addresses which can overcome the 2GB limitation.

# Decision

The flag **-fpie** is added to **CFLAGS** used by the compiler.